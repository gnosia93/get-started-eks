## 배포 ##

### 1. 카나리(Canary) 및 블루-그린(Blue-Green) 구현 ###
ALB의 리스너 규칙에서 하나의 규칙에 두 개의 타겟 그룹을 연결하고 가중치를 부여하면 한다.
* 설정 방법: ALB 리스너 편집 → 규칙(Rule) 수정 → 전달 대상(Forward to)에 Target Group A(기존/Blue)와 Target Group B(신규/Green)를 모두 추가.
* 가중치 조절:
  * 카나리: A: 95% / B: 5%로 설정하여 신규(ARM) 인스턴스로 소량의 트래픽만 흘려보내 성능을 검증.
  * 블루-그린: 검증이 끝나면 A: 0% / B: 100%로 가중치를 변경하여 즉시 전환.

### 2. 롤아웃(Rolling Update / Rollout) ###
오토스케일링이 자동으로 ARM 인스턴스를 생성하게 하려면 시작 템플릿(Launch Template)을 업데이트해야 한다.
* 새로운 시작 템플릿 버전 생성 - AMI를 ARM용(Graviton)으로 바꾸고, 인스턴스 유형을 ARM 계열(예: t4g, c6g 등)로 변경.
* ASG 설정 변경 - 오토스케일링 그룹의 시작 템플릿을 방금 만든 새 버전으로 업데이트.
* 인스턴스 교체 -  인스턴스 새로 고침(Instance Refresh) 기능을 사용하면 기존 x86 인스턴스들이 순차적으로 종료되고 새 ARM 인스턴스로 자동 교체.


## 기타 ##
### 1. 테스트 목적: 타겟 그룹에 수동 추가 ###
ASG와 별개로, 생성한 ARM 인스턴스를 기존 ALB의 타겟 그룹(Target Group)에 직접 등록하는 방법이다.
* EC2 콘솔의 타겟 그룹 메뉴에서 기존 ALB가 사용하는 타겟 그룹을 선택 → [Targets] 탭 → [Register targets] 클릭 → 새로 만든 ARM 인스턴스 선택.  
기존 x86 인스턴스들과 함께 트래픽을 나눠 받기 시작한다.

### 2. 혼합 구성 (Instance Types Mixed) ###
하나의 ASG 내에서 x86과 ARM을 동시에 띄우고 싶다면 혼합 인스턴스 정책(Mixed Instances Policy)을 사용할 수 있다. 

#### Option 1. 인스턴스 요구 사항(Attribute-based selection) 설정 ###
* 특정 인스턴스 유형(t3.medium 등)을 지정하는 대신 "vCPU 2개, 메모리 4GB" 같은 사양(Attribute)을 지정.
* Allowed instance types 목록에 x86(t3)과 ARM(t4g)을 모두 포함시킵니다.
* 주의: 사용 중인 AMI가 x86과 ARM을 모두 지원해야 한다.

#### Option 2. 별도의 ASG 운영 (실무 권장) ###
x86용 ASG와 ARM용 ASG를 각각 만든 뒤, 동일한 ALB 타겟 그룹에 두 ASG를 모두 연결한다.
ALB는 어느 ASG에서 왔는지 상관없이 가용 인스턴스에 트래픽을 분산한다.

----
